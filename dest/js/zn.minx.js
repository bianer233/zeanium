var zn={version:"0.0.1",debug:!1,path:"",global:function(){return this}.call(null)};"undefined"!=typeof module&&module.exports&&(module.exports=zn),function(a){var b={toString:function(a){return Object.prototype.toString.call(a)},fix:function(a,b){for(var c in b)"function"!=typeof a[c]&&(a[c]=b[c]);return this},extend:function(a){for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}return a},overwrite:function(a){for(var b=a||{},c=1,d=arguments.length;d>c;c++){var e=arguments[c];for(var f in e)e.hasOwnProperty(f)&&void 0===b[f]&&(b[f]=e[f])}return b},each:function(a,b,c){if(a&&b)if(a.__class__&&a.__each__)a.__each__(b,c);else{var d=a.length;if(d>=0&&"[object Array]"===Object.prototype.toString.call(a))for(var e=0;d>e;e++)b.call(c,a[e],e);else for(var f in a)a.hasOwnProperty(f)&&b.call(c,a[f],f)}},clone:function(b){if(b){if(b.__clone__)return b.__clone__();if(a.is(b,"array"))return b.slice(0);var c={};for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}return b},type:function(a){return a&&a.__type__?a.__type__:Object.prototype.toString.call(a).slice(8,-1).toLowerCase()},is:function(a,b){if(a&&a.__is__)return a.__is__(b);if("string"==typeof b){b=b.toLowerCase();var c=Object.prototype.toString.call(a).slice(8,-1).toLowerCase();switch(b){case"plain":return a&&a.constructor===Object;default:return c===b}}else if("function"==typeof b)return a instanceof b},may:function(a,b){return a?a.__may__?a.__may__(b):a.hasOwnProperty("on"+b):!1},can:function(a,b){return a?a.__can__?a.__can__(b):"function"==typeof a[b]:!1},has:function(a,b){return a?a.__has__?a.__has__(b):a.hasOwnProperty(b):!1},get:function(a,b){return a?a.__get__?a.__get__(b):a[b]:void 0},set:function(a,b,c){a&&(a.__set__?a.__set__(b):a[b]=c)},gets:function(a){if(a){if(a.__gets__)return a.__gets__();var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}},sets:function(a,b){if(a&&b)if(a.__sets__)a.__sets__(b);else for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},path:function(a,b,c){var d=a;if(b){var e,f=b.split("."),g=0,h=f.length;if(arguments.length<3)for(;d&&h>g;g++)e=f[g],d=d.__get__?d.__get__(e):d[e];else{for(h-=1;d&&h>g;g++)e=f[g],d=d.__get__?d.__get__(e):d[e]=d[e]||{};e=f[g],d&&(d.__set__?d.__set__(e,c):d[e]=c,d=c)}}return d},invoke:function(b,c,d){if(b&&c){var e,f,g=c.lastIndexOf(".");g>0?(e=a.path(b,c.substring(0,g)),e&&(f=e[c.substring(g+1)])):(e=b,f=b[c]),f&&f.apply(e,d)}}};b.extend(a,b)}(zn),function(a){var b={isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)}},c={forEach:function(a,b){if(!a)return!1;for(var c=0,d=this.length;d>c;c++)a.call(b,this[c],c);return this},indexOf:function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},lastIndexOf:function(a){for(var b=this.length-1;b>=0;b--)if(this[b]===a)return b;return-1}},d={bind:function(a){var b=this;return function(){return b.apply(a,Array.prototype.slice.call(arguments))}}},e={keys:function(a){if(a!==Object(a))throw new TypeError("Object.keys called on a non-object");var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return console.log(this),c},create:function(){var a=function(){},b=this;return function(c,d){if(null===c)throw new Error("Cannot set a null [[Prototype]]");if("object"!=typeof c)throw new TypeError("Argument must be an object");return b.defineProperties(c,d),a.prototype=c,new a}}(),defineProperty:function(a,b,c){return a&&b&&c&&c.hasOwnProperty("value")&&(a[b]=c.value),a}};a.fix(Array,b),a.fix(Array.prototype,c),a.fix(Function.prototype,d),a.fix(Object,e);try{Object.defineProperty({},"zn",{})}catch(f){Object.defineProperty=function(a,b,c){return e.defineProperty(a,b,c)}}}(zn),function(a){function b(a,b,c){var d=f+b,e=d in a;return a[d]={name:b,type:"event",meta:c,descriptor:Object.defineProperty(a,"on"+b.toLowerCase(),{get:function(){var a=this.__handler__[b];return a?a[0].handler:null},set:function(a){var c=this.__handler__,d=c[b]=c[b]||[];d[0]={owner:this,handler:a,context:null}}})},e}function c(b,c,d){var e,g,h=f+c,i=h in b;if("value"in d){var j=d.value,k="_"+c;e=function(){return k in this?this[k]:a.is(j,"function")?j.call(this):j},g=d.readonly?function(a,b){return b&&b.force?void(this[k]=a):!1}:function(a){this[k]=a}}else e=d.get||function(){return void 0},g=d.set||function(){return!1};return i&&(e.__base__=b[h].getter,g.__base__=b[h].setter),b[h]={name:c,type:"property",meta:d,getter:e,setter:g,descriptor:Object.defineProperty(b,c,{get:e,set:g,configurable:!0})},i}function d(a,b,c){var d=f+b,e=d in a;return a[d]={name:b,type:"method",meta:c},b in a&&(c.value.__base__=a[b]),a[b]=c.value,e}function e(){}var f="@",g=1,h=a.GLOBAL,i={member:function(a){return this[f+a]},may:function(a){var b=this.member(a);return b&&"event"==b.type},has:function(a){var b=this.member(a);return b&&"property"==b.type},can:function(a){var b=this.member(a);return b&&"method"==b.type},get:function(a,b){var c=this.member(a);return c&&c.getter.call(this,b)},set:function(a,b,c){var d=this.member(a);return d&&d.setter&&d.setter.call(this,b,c),this},gets:function(b){var c={};return a.each(this.constructor.__properties__,function(a){c[a]=this.get(a,b)},this),c},sets:function(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&this.set(c,a[c],b);return this},upon:function(b,c,d){if(c){var e=this.__handler__,f=e[b]=e[b]||[];f[0]=a.extend({owner:this,handler:c},d)}return this},on:function(b,c,d){if(c){var e=this.__handler__,f=e[b]=e[b]||[{owner:null,handler:null,context:null}];f.push(a.extend({owner:this,handler:c},d))}return this},off:function(a,b,c){var d,e=this.__handler__[a],f=c&&c.context;if(e)if(b)for(var g=e.length-1;g>=0;g--)d=e[g],d.handler!==b||f&&d.context!==f||e.splice(g,1);else e.length=1;return this},fire:function(a,b,c){var d,e=this.__handler__[a];if(e)for(var f=0,g=e.length;g>f;f++)if(d=e[f],d&&d.handler&&!1===d.handler.call(d.context||d.owner,d.owner,b,c))return!1},__may__:function(a){return this.may(a)},__can__:function(a){return this.can(a)},__has__:function(a){return this.has(a)},__get__:function(a){return this.get(a)},__set__:function(a,b){this.set(a,b)},__gets__:function(){return this.gets()},__sets__:function(a){this.sets(a)}},j={getMeta:function(a){return this.__meta__[a]},setMeta:function(a,b){return this.__meta__[a]=b,this},defineEvent:function(a,c,d){return b(d||this.prototype,a,c)||this.__events__.push(a),this},defineProperty:function(a,b,d){return c(d||this.prototype,a,b)||this.__properties__.push(a),this},defineMethod:function(a,b,c){return d(c||this.prototype,a,b)||this.__methods__.push(a),this}},k={dispose:function(){this.__handler__={}},destroy:function(){this.dispose()},base:function(){var a=this.base.caller.__base__;return a?a.apply(this,arguments):void 0},is:function(b){if("string"==typeof b&&(b=a.path(h,b)),b){if(this instanceof b)return!0;for(var c=this.constructor.__mixins__,d=0,e=c.length;e>d;d++){var f=c[d];if(b===f)return!0}}return!1},__is__:function(a){return this.is(a)}};a.extend(e,i,j,{__id__:0,__statics__:{},__events__:[],__properties__:[],__methods__:[],__mixins__:[],__meta__:{}}),a.extend(e.prototype,i,k),a.class=function(){var f,l,m,n=arguments,o=n.length,p=n[0];if(3===o){if(f=p,l=n[1],m=n[2],!a.is(l,"function"))throw new Error("Invalid base class.")}else if(2===o){if(a.is(p,"string"))f=p,l=null;else{if(!a.is(p,"function"))throw new Error("Invalid base class.");f=null,l=p}m=n[1]}else{if(1!==o)throw new Error("Invalid arguments.");if(f=null,l=null,m=p,!a.is(m,"object"))throw new Error("The meta argument must be an object.")}m=m||{},l=l||e;var q,r,s,t=m.static||!1,u=m.partial||!1,v=m.abstract||!1,w=m.final||!1,x=m.mixins||[],y=m.statics||{},z=m.events||[],A=m.properties||{},B=m.methods||{};if(l.__static__)throw new Error("Static class cannot be inherited.");if(l.__final__)throw new Error("Final class cannot be inherited.");if(f&&u&&(r=a.path(h,f)),t){if(r){if(!r.__static__)throw new Error('Partial class "'+f+'" must be static.')}else r=function(){throw new Error("Cannot instantiate static class.")};q=r.prototype}else{if(r){if(r.__static__)throw new Error('Partial class "'+f+'" must not be static.');if(r.__base__!==l&&r.__base__!==e)throw new Error('Partial class "'+f+'" must have consistent base class.')}else r=v?function(){throw new Error("Cannot instantiate abstract class.")}:function(){var a=r.__mixins__;this.__id__=g++,this.__handler__={},this.__initializing__=!0;for(var b=0,c=a.length;c>b;b++){var d=a[b].prototype.__ctor__;d&&d.call(this)}this.__ctor__&&this.__ctor__.apply(this,arguments),this.__initializing__=!1};r.__base__!==l?(s=function(){},s.prototype=l.prototype,q=new s,q.constructor=r,q.__type__=f,r.prototype=q):q=r.prototype,B.init&&(q.__ctor__=B.init)}return a.extend(r,i,j,{__id__:g++,__name__:f,__base__:l,__partial__:u,__abstract__:v,__static__:t,__final__:w,__statics__:a.extend({},l.__statics__,y),__events__:l.__events__.slice(0),__properties__:l.__properties__.slice(0),__methods__:l.__methods__.slice(0),__mixins__:l.__mixins__.concat(x),__meta__:m,toString:function(){return"[Class "+(this.__name__||"Anonymous")+"]"}}),a.extend(r,r.__statics__),t?(a.each(z,function(a){b(r,a,{})}),a.each(A,function(b,d){c(r,d,a.is(b,"object")?b:{value:b})}),a.each(B,function(b,c){d(r,c,a.is(b,"function")?{value:b}:b)}),B.init&&B.init.call(r)):(a.each(x,function(b){var c=b.prototype;a.each(b.__events__,function(a){r.defineEvent(a,c.member(a).meta)}),a.each(b.__properties__,function(a){r.defineProperty(a,c.member(a).meta)}),a.each(b.__methods__,function(a){i[a]||k[a]||r.defineMethod(a,c.member(a).meta)})}),a.each(z,function(a){r.defineEvent(a,{})}),a.each(A,function(b,c){r.defineProperty(c,a.is(b,"object")?b:{value:b})}),a.each(B,function(b,c){r.defineMethod(c,a.is(b,"function")?{value:b}:b)})),q.__define__&&q.__define__.call(r),r}}(zn);